/*
	jQuery Extended Mag(nify)
	Author: Caleb O'Leary
	Site: http://caleboleary.com
	Current Version: https://github.com/caleboleary/jQuery-Extended-Mag
	MIT License
*/
!function(a){"use strict";a.fn.extend({extm:function(c){function f(b,c){var g,d=c.width(),e=c.height(),f=c.offset();b.zoomElement?g=b.zoomElement:(g=a("<div style='overflow:hidden;pointer-events:none;height:"+e+"px;width:"+d+"px;' class='extm'></div>"),"right"===b.position?(g.appendTo(a("body")),g.css("position","absolute"),g.css("top",f.top),g.css("left",f.left+d+b.rightPad)):"overlay"===b.position?(g.appendTo(a("body")),g.css("position","absolute"),g.css("top",f.top),g.css("left",f.left)):g.insertAfter(c));var h,i;if(b.squareOverlay&&(h=a("<div class='overlayElement' style='pointer-events:none;height:"+e+"px;width:"+d+"px;position:absolute;top:"+f.top+"px;left:"+f.left+"px;'></div>"),a("body").append(h),i=a("<div style='background-color:rgba(0,0,0,0.2);position:absolute;' class='innerOverlay'></div>"),h.append(i)),b.lazy||(g.css("visibility","hidden"),b.squareOverlay&&i.css("visibility","hidden")),b.zoomSize)var j=a('<img style="position:relative;max-width:none;width:'+b.zoomSize+'px;">');else if(1!==b.zoomLevel)var j=a('<img style="position:relative;max-width:none;width:'+100*b.zoomLevel+'%;">');else var j=a('<img style="position:relative;max-width:none;">');b.imageSrc?j.attr("src",b.imageSrc):j.attr("src",c.attr("src")),j.appendTo(g),function(b,c,d,e,f,g,h,i,j){if(j.loadingText){var k=a("<div class='loadingElement' style='pointer-events:none;height:"+f+"px;width:"+g+"px;font-family:sans-serif;position:absolute;top:"+h.top+"px;left:"+h.left+"px;visibility:hidden;background:rgba(255,255,255,0.5);color:black;font-size:2em;font-weight:bold;text-align:center;'><p style='position: absolute; left: 50%;top: 50%;transform: translate(-50%, -50%);'>"+j.loadingText+"</p></div>");a("body").append(k),b.on("mouseenter",function(){k.css("visibility","visible")}),b.on("mouseleave",function(){k.css("visibility","hidden")}),b.is(":hover")&&b.trigger("mouseenter")}else if(j.loadingImage){var k=a("<div class='loadingElement' style='pointer-events:none;height:"+f+"px;width:"+g+"px;font-family:sans-serif;position:absolute;top:"+h.top+"px;left:"+h.left+"px;visibility:hidden;background:rgba(255,255,255,0.5);color:black;font-size:2em;font-weight:bold;text-align:center;'><img style='position: absolute; left: 50%;top: 50%;transform: translate(-50%, -50%);' src='"+j.loadingImage+"'/></div>");a("body").append(k),b.on("mouseenter",function(){k.css("visibility","visible")}),b.on("mouseleave",function(){k.css("visibility","hidden")}),b.is(":hover")&&b.trigger("mouseenter")}d.load(function(){(j.loadingText||j.loadingImage)&&(b.trigger("mouseleave"),b.unbind("mouseenter mouseleave"),k.remove()),b.on("mouseenter",function(){h=b.offset(),"right"===j.position?(c.css("top",h.top),c.css("left",h.left+g+j.rightPad)):"overlay"===j.position&&(c.css("top",h.top),c.css("left",h.left)),j.squareOverlay&&(e.css("top",h.top),e.css("left",h.left)),c.css("visibility","visible"),j.squareOverlay&&i.css("visibility","visible")}),b.on("mouseleave",function(){c.css("visibility","hidden"),j.squareOverlay&&i.css("visibility","hidden")}),b.is(":hover")&&b.trigger("mouseenter");var a=d.width(),l=d.height(),m=a/g,n=l/f,o=0-(a-c.width()),p=0-(l-c.height());if(j.squareOverlay){var q=g/a*g,r=f/l*f;i.css("height",r),i.css("width",q)}b.on("mousemove",function(a){h=b.offset();var c=f/2-(a.pageY-h.top)*n;c=Math.max(c,p),c=Math.min(c,0);var e=g/2-(a.pageX-h.left)*m;if(e=Math.max(e,o),e=Math.min(e,0),d.css("top",c),d.css("left",e),j.squareOverlay){var k=a.pageY-h.top-i.height()/2;k=Math.max(k,0),k=Math.min(k,f-i.height());var l=a.pageX-h.left-i.width()/2;l=Math.max(l,0),l=Math.min(l,g-i.width()),i.css("top",k),i.css("left",l)}})})}(c,g,j,h,e,d,f,i,b),c.on("extmdestroy",function(){g.remove(),b.squareOverlay&&h.remove()}),c.on("updateImage",function(a,b){j.attr("src",b)})}var d={zoomElement:!1,imageSrc:a(this).attr("src"),squareOverlay:!1,position:!1,rightPad:0,lazy:!1,zoomLevel:1,zoomSize:!1,loadingText:!1,loadingImage:!1},e=a.extend({},d,c||{});e.lazy?a(this).width()>10&&a(this).height()>10?a(this).one("mouseenter",function(){f(e,a(this))}):a(this).one("load",function(){a(this).one("mouseenter",function(){f(e,a(this))})}):a(this).width()>10&&a(this).height()>10?f(e,a(this)):a(this).one("load",function(){f(e,a(this))})},extmDestroy:function(){a(this).trigger("extmdestroy")},extmImageUpdate:function(b){a(this).trigger("updateImage",b)}})}(jQuery);
