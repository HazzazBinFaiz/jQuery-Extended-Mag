!function(t){jQuery.fn.extend({extm:function(e){function s(e,s){if(sW=s.width(),sH=s.height(),offset=s.offset(),e.zoomElement)var i=e.zoomElement;else{var i=t("<div style='overflow:hidden;pointer-events:none;height:"+sH+"px;width:"+sW+"px;' class='extm'></div>");"right"==e.position?(i.appendTo(t("body")),i.css("position","absolute"),i.css("top",offset.top),i.css("left",offset.left+sW)):"overlay"==e.position?(i.appendTo(t("body")),i.css("position","absolute"),i.css("top",offset.top),i.css("left",offset.left)):i.insertAfter(s)}if(e.squareOverlay){var o=t("<div class='overlayElement' style='pointer-events:none;height:"+sH+"px;width:"+sW+"px;position:absolute;top:"+offset.top+"px;left:"+offset.left+"px;'></div>");t("body").append(o);var a=t("<div style='background-color:rgba(0,0,0,0.2);visibility:hidden;position:absolute;' class='innerOverlay'></div>");o.append(a)}e.lazy||i.css("visibility","hidden");var l=t('<img style="position:relative;max-width:none;">');e.imageSrc?l.attr("src",e.imageSrc):l.attr("src",s.attr("src")),l.appendTo(i),function(t,s,i,o,l,n,r){i.load(function(){t.on("mouseenter",function(){var i=t.offset();"right"==e.position?(s.css("top",i.top),s.css("left",i.left+n)):"overlay"==e.position&&(s.css("top",i.top),s.css("left",i.left)),e.squareOverlay&&(o.css("top",i.top),o.css("left",i.left)),s.css("visibility","visible"),e.squareOverlay&&a.css("visibility","visible")}),t.on("mouseleave",function(){s.css("visibility","hidden"),e.squareOverlay&&a.css("visibility","hidden")});var r=i.width(),f=i.height(),h=r/n,p=f/l,c=0-(r-s.width()),v=0-(f-s.height());if(e.squareOverlay){var d=n/r*n,m=l/f*l;a.css("height",m),a.css("width",d)}t.on("mousemove",function(s){var o=t.offset(),r=l/2-(s.pageY-o.top)*p;if(r=Math.max(r,v),r=Math.min(r,0),setLeft=n/2-(s.pageX-o.left)*h,setLeft=Math.max(setLeft,c),setLeft=Math.min(setLeft,0),i.css("top",r),i.css("left",setLeft),e.squareOverlay){var f=s.pageY-o.top-a.height()/2;f=Math.max(f,0),f=Math.min(f,l-m),squareLeft=s.pageX-o.left-a.width()/2,squareLeft=Math.max(squareLeft,0),squareLeft=Math.min(squareLeft,n-d),a.css("top",f),a.css("left",squareLeft)}})})}(s,i,l,o,sH,sW,offset),s.on("extmdestroy",function(){i.remove(),e.squareOverlay&&o.remove()})}var i={zoomElement:!1,imageSrc:t(this).attr("src"),squareOverlay:!1,position:!1,lazy:!1},o=t.extend({},i,e||{});o.lazy?this.one("mouseenter",function(){s(o,t(this))}):s(o,this)},extmDestroy:function(){this.trigger("extmdestroy")}})}(jQuery);
